<h1 class="text-center mb-4">{{product.title}}</h1>

<div class="product-detail card text-center p-3">
  <img src="{{product.thumbnail}}" alt="{{product.title}}" class="product-detail-img mb-3" />
  <p><strong>Descripción:</strong> {{product.description}}</p>
  <p><strong>Precio:</strong> ${{product.price}}</p>
  <p><strong>Categoría:</strong> {{product.category}}</p>
  <p><strong>Stock:</strong> {{product.stock}}</p>

  <button id="addToCartBtn" data-id="{{product._id}}" class="btn btn-primary">Agregar al carrito</button>
</div>

<script>
  const btn = document.getElementById('addToCartBtn');
  btn.onclick = async () => {
    const productId = btn.getAttribute('data-id');
    let cartId = localStorage.getItem('cartId');
    if (!cartId) {
      const res = await fetch('/api/carts', { method: 'POST' });
      const data = await res.json();
      cartId = data._id;
      localStorage.setItem('cartId', cartId);
    }
    await fetch(`/api/carts/${cartId}/products/${productId}`, { method: 'POST' });
    alert('Producto agregado al carrito');
  };
</script>
